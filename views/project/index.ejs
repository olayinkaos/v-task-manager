<% layout( '../layouts/master' ) -%>

<section class="section">
	<div class="columns">
		<div class="column">
			<h1 class="title">
				All Projects
				<span class="muted"><a href="/task">All Tasks</a></span>
			</h1>
			<% projects.forEach( project => { -%>
			<div class="box">
				<article class="media">
					<div class="media-content">
						<div class="content">
							<p>
								<a href="/task?project=<%= project._id %>">
									<strong><%= project.name %></strong> 
								</a>
								<small><%= project.createdAt %></small> <br>
								<%= project.description %>
							</p>
						</div>

						<nav class="level is-mobile">
							<div class="level-left">
								<% if (project.completed) { -%>
								<span class="tag is-success">completed</span>
								<% } else { -%>
								<span class="tag is-warning">not completed</span>
								<% } -%>
								&nbsp;

								<a class="level-item" href="/project/destroy/<%= project._id %>" 
									data-confirm="Are you sure you want to delete project '<%= project.name%>'. It will most likely lead to errors :(">
									<span class="icon is-small"><i class="fa fa-trash"></i></span>
								</a>
							</div>
						</nav>
					</div>
				</article>
				
			</div>
			<% }) -%>
		</div>
		<div class="column">
			
		</div>
	</div>	
</section>
